<div class="max-w-screen-md mx-auto animate-fly-in-bottom">
  <h1 class="text-2xl mb-8">Posts</h1>

  <p class="mb-8">
    Basic CRUD operations should work on this page. Endpoints should only work
    if the user is authenticated.
  </p>
  @if (!isLoading) { @if (posts?.length) {

  <div class="flex flex-col gap-4 animate-fly-in-bottom">
    @for (post of posts; track post) {
    <mat-card>
      <mat-card-header>
        <mat-card-title>{{ post.title }}</mat-card-title>
        <mat-card-subtitle
          >{{ post.createdBy }} -
          {{ post.createdDate | date : "short" }}</mat-card-subtitle
        >
      </mat-card-header>
      <mat-card-content>
        <p>{{ post.content }}</p>
      </mat-card-content>
      <mat-card-actions>
        <button mat-button color="warn" (click)="onDeleteClicked(post.postId)">
          <mat-icon>delete</mat-icon> Delete
        </button>
      </mat-card-actions>
    </mat-card>
    }
  </div>

  } @else {

  <p class="mb-4">No posts</p>

  } } @else {

  <div class="flex flex-col items-center animate-fly-in-bottom">
    <mat-spinner> </mat-spinner>
    <p>Loading posts</p>
  </div>

  }

  <button
    class="mt-8"
    mat-raised-button
    role="link"
    [routerLink]="['/' + RouteNames.CreatePost]"
    color="primary"
  >
    <mat-icon>add</mat-icon> Create Post
  </button>
</div>
